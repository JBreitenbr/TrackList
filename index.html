<!DOCTYPE html>
  <html lang="en">

  <head>

    <meta charset="UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" href="styles.css" >
<script src="https://cdn.tailwindcss.com"></script>
    <title>Document</title>

  </head>

  <body>

    <div id="root"></div>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>

    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <script type="text/javascript" src="https://unpkg.com/babel-standalone@6/babel.js"></script>

    <script type="text/babel">
const {useState,useEffect}=React;
  // Define a component called Greetings
const PostList = ({ posts }) => {
  return (
    <ul className="list-group grid grid-cols-2">
      {posts.map((post,index) => (
        <li key={index} className="list-group-item bg-orange-100">
          <img src={post.album_pic} className="h-20 w-20 sm:h-32 sm:w-32" style={{border:"1px solid #0f172a"}}/>
          <p>{post.track}</p>
        </li>
      ))}
    </ul>
  );
};

const Pagination = ({
  postsPerPage,
  totalPosts,
  setCurrentPage,
  currentPage,
}) => {
  const pageNumbers = [];

  for (let i = 1; i <= Math.ceil(totalPosts / postsPerPage); i++) {
    pageNumbers.push(i);
  }
  const paginate = (pageNumber, e) => {
    e.preventDefault();
    setCurrentPage(pageNumber);
  };

  return (
    <nav>
      <ul className="pagination grid grid-cols-10">
        {pageNumbers.map((number) => (
          <li
            key={number}
            className={`page-item ${currentPage === number ? "active" : ""}`} >
            <a
              onClick={(e) => paginate(number, e)}
              href="!#"
              className="page-link"
            >
              {number}
            </a>
          </li>
        ))}
      </ul>
    </nav>
  );
};   
const ClientSide = () => {
  const [posts, setPosts] = useState([]);
  const [currentPage, setCurrentPage] = useState(1);
  const [postsPerPage] = useState(8);
  const [bandsArr,setBandsArr]=useState([]);
  const [bands,setBands]=useState([]);
  const [letter,setLetter]=useState();
  const [artist,setArtist]=useState("Eric Dolphy");
  function handleLetter(e){
    setLetter(e.target.value)
    /*setBands(bandsArr.find(item=>item.name===e.target.value).bands)*/
  }
  function handleArtist(e){
    setArtist(e.target.value);
  }
  useEffect(() => {
    const fetchPosts = async () => {
      const res = await fetch(`https://raw.githubusercontent.com/JBreitenbr/Spoti-Data/refs/heads/main/Songs/${artist}.json`);
      const data = await res.json();
      setPosts(data);
    };

    fetchPosts();
  }, [artist]);
useEffect(() => {
    const fetchBands = async () => {
      const res = await fetch(`https://raw.githubusercontent.com/JBreitenbr/Spoti-Data/refs/heads/main/bandSubs.json`);
      const pre = await res.json();
      const data=pre.map((item)=>item.bands.map((sub)=>sub.name)).flat();
      setBands(data);
    };

    fetchBands();
  },[]);
 useEffect(()=>{ 
  const fetchArr = async () => {
      const res = await fetch(`https://raw.githubusercontent.com/JBreitenbr/Spoti-Data/refs/heads/main/bandSubs.json`);
      const data = await res.json();
      setBandsArr(data);
    };

    fetchArr();
  },[]);
  const indexOfLastPost = currentPage * postsPerPage;
  const indexOfFirstPost = indexOfLastPost - postsPerPage;
  const currentPosts = posts.slice(indexOfFirstPost, indexOfLastPost);

  return (
    <div className="container bg-slate-200">
      <select className="mx-8 sm:mx-32 sm:h-6 sm:text-xl" onChange={handleLetter}>
      <option>--Select Letter--</option>
        {bandsArr.map(item=>
          <option key={item.name}>{item.name}</option>
        )}
      </select>
      <select className="mb-6 mx-8 sm:mx-32 sm:h-6 sm:text-xl" onChange={handleArtist}>
        <option>--Select Artist--</option>
        {bands.map(item=>
          <option key={item}>{item}</option>
        )}</select>
      <PostList posts={currentPosts} />
      <Pagination
        postsPerPage={postsPerPage}
        totalPosts={posts.length}
        setCurrentPage={setCurrentPage}
        currentPage={currentPage}
      />
    </div>
  );
};
  function Greetings() {
      
    const [name,setName]=useState("Julia");
    const handleChange=(e)=>setName(e.target.value);
    return (<div><input onChange={handleChange} type="text"/><h1>Hello readers, Thank you, {name}, for reading this blog !</h1></div>);

  }

  // Render the component to the DOM
      ReactDOM.render(

    <ClientSide/>,

    document.getElementById("root")

  );

</script>

  </body>

</html>
